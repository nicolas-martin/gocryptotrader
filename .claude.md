# GoCryptoTrader Project Overview

## Project Summary
GoCryptoTrader is a comprehensive cryptocurrency trading bot written in Go, supporting multiple exchanges with both REST and WebSocket APIs. It provides automated trading capabilities, portfolio management, backtesting, and real-time market data synchronization.

## Core Architecture

### Main Components
- **Engine** (`/engine/`): Central orchestrator managing all subsystems
- **Exchanges** (`/exchanges/`): Individual exchange implementations with unified interface
- **Backtester** (`/backtester/`): Event-driven backtesting framework for strategy testing
- **Communications** (`/communications/`): Multi-channel notification system (Slack, Telegram, SMS, SMTP)
- **Database** (`/database/`): Data persistence layer supporting PostgreSQL and SQLite
- **WebSocket Manager** (`/exchange/websocket/`): Centralized WebSocket connection handling
- **gRPC/RPC Server** (`/gctrpc/`, `/engine/rpcserver.go`): Remote procedure call interface

### Key Subsystems
- **Order Manager**: Manages order lifecycle and tracking
- **Portfolio Manager**: Tracks balances and holdings across exchanges
- **Sync Manager**: Synchronizes ticker, orderbook, and trade data
- **Event Manager**: Processes and dispatches trading events
- **Currency State Manager**: Manages currency pair states and availability
- **Data History Manager**: Historical data retrieval and management
- **Connection Monitor**: Network connectivity monitoring
- **NTP Client**: System time synchronization

## Supported Exchanges (24+)
Binance, Binance.US, Bitfinex, Bitflyer, Bithumb, BitMEX, Bitstamp, BTCMarkets, BTSE, Bybit, CoinbasePro, COINUT, Deribit, Exmo, GateIO, Gemini, HitBTC, Huobi, Kraken, Kucoin, Lbank, OKX, Poloniex, Yobit

## Technology Stack
- **Language**: Go 1.24.1
- **Database**: PostgreSQL, SQLite3
- **Protocols**: REST, WebSocket, gRPC
- **Serialization**: JSON (with optional Sonic optimization), Protocol Buffers
- **Testing**: Built-in Go testing with race detection
- **Build**: Make-based build system

## Key Features
- Multi-exchange support with unified API
- Real-time data streaming via WebSocket
- Backtesting framework with multiple strategies
- Portfolio management and tracking
- Order management with various order types
- Multi-channel communication alerts
- AES256 encrypted configuration
- Rate limiting and retry mechanisms
- OHLCV/Candle data support
- Forex currency conversion
- GCT scripting support (Tengo-based)

## Configuration
- Main config: `config_example.json` (copy to `~/.gocryptotrader/config.json`)
- Encrypted storage for API credentials
- Per-exchange configuration with asset-specific settings
- Customizable sync intervals and timeouts

## Development Workflow

### Building
```bash
make build          # Standard build
make sonic          # Build with Sonic JSON optimization
make install        # Install binary
```

### Testing
```bash
make test           # Run all tests with race detection
make check          # Run lint + test
make lint           # Run linter only
```

### Code Quality
- Linting: golangci-lint
- Formatting: gofmt, gofumpt
- Coverage: codecov integration

## CLI Tools
- **gctcli**: Command-line interface for controlling the bot
- **backtester/btcli**: Backtesting CLI tool
- **websocket_client**: WebSocket testing client
- **gen_otp**: OTP generation tool
- **exchange_template**: Exchange integration generator

## Important Directories
- `/exchanges/`: Exchange implementations
- `/engine/`: Core engine and subsystems
- `/backtester/`: Backtesting framework
- `/cmd/`: CLI tools and utilities
- `/database/`: Database layer and migrations
- `/gctrpc/`: gRPC definitions and server
- `/config/`: Configuration management
- `/currency/`: Currency and forex handling
- `/communications/`: Notification systems

## API Interfaces
- **gRPC API**: Full-featured RPC interface for remote control
- **REST Proxy**: JSON-RPC proxy for gRPC
- **WebSocket RPC**: Real-time bidirectional communication

## Security Features
- AES256 config encryption
- API credential purging
- Secure credential storage
- Rate limiting protection
- Proxy support

## Testing Strategy
- Unit tests for all major components
- Integration tests for exchange implementations
- Mock exchange testing framework
- Race condition detection
- Continuous integration via GitHub Actions

## Performance Optimizations
- Optional Sonic JSON parser for improved performance
- Concurrent processing with worker pools
- Efficient orderbook management
- Caching mechanisms
- Connection pooling

## Monitoring & Debugging
- Comprehensive logging system
- Performance profiling support (heap, CPU)
- Connection monitoring
- Event tracking
- Debug modes for HTTP and WebSocket

## Build Flags
Key runtime flags:
- `--config`: Config file path
- `--grpc`: Enable gRPC server
- `--verbose`: Increase logging verbosity
- `--dryrun`: Run without saving config
- `--exchangeverbose`: Exchange-specific debugging

## Notes for Development
- Follow coding guidelines in `/docs/CODING_GUIDELINES.md`
- Exchange integrations should implement standard interfaces
- Use the exchange template generator for new exchanges
- All exchanges must support the unified API
- Maintain backward compatibility in config versions
- Race-free code is mandatory (tests run with -race flag)

## Current Status
**IMPORTANT**: This bot is under active development and not yet production-ready. Use at your own risk.

## Community
- Slack: [GoCryptoTrader Community](https://join.slack.com/t/gocryptotrader/shared_invite/zt-38z8abs3l-gH8AAOk8XND6DP5NfCiG_g)
- GitHub: [thrasher-corp/gocryptotrader](https://github.com/thrasher-corp/gocryptotrader)